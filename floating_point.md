# 浮点表示

浮点数即小数点的位置可以浮动的数。

浮点数被表示成：
$$
N = S \times r^i
$$
其中，S为尾数，j为阶码，r是基数，基数可取2、4、8、16等。

### 浮点数的表示形式

![image-20220527161217370](/Users/bytedance/Library/Application Support/typora-user-images/image-20220527161217370.png)

浮点数由阶码j和尾数S两部分组成。阶码是整数，阶符和阶码的位数m合起来反映浮点数的表示范围及小数点的实际位置；尾数是小数，其位数n反映了浮点数的精度；尾数的符号Sf浮点数的正负。

### 浮点数的表示范围

![image-20220527161453898](/Users/bytedance/Library/Application Support/typora-user-images/image-20220527161453898.png)

当浮点数阶码大于最大阶码时称为上溢，此时机器停止运算，进行中断溢出处理；当浮点数阶码最小阶码时称为下溢，此时溢出的数绝对值很小，通常将尾数各位强置为零，按机器零处理，此时机器可以继续运行。一旦浮点数的位数确定后，合理分配阶码和尾数的位数，直接影响浮点数的表示范围和精度。通常短实数（总位数为32位），阶码取8位（含阶符1位），尾数取24位（含数符1位）；对于长实数（总位数64位），阶码取11位（含阶符1位），尾数取53位（含数符1位）；对于临时实数（总位数80位），阶码取15位（含阶符1位），尾数取65位（含数符1位）。

### 浮点数的规格化

为提高浮点数的精度，其尾数必须为规格化数。如果不是规格化数，就要通过修改阶码并同时左右移尾数的办法，使其规格化数。将非规格化数转换成规格化数的过程称为规格化。对于基数不同的浮点数，因其规格化数的形式不同，规格化过程也不同。

- 当基数为2时，尾数的最高1位为1的数为规格化数。规格化时，尾数左移1位，阶码减1；尾数右移1位，阶码加1。
- 当基数为4时，尾数的最高两位不全为零的数为规格化数。规格化时，尾数左移2位，阶码减1；尾数右移2位，阶码加1。
- 当基数为8时，尾数的最高3位不全为零的数为规格化数。规格化时，尾数左移3位，阶码减1；尾数右移3位，阶码加1。
- 其他的以此类推

向左移的规划化称为向左规格化，简称左规；向右移的规划化称为向右规格化，简称右规。

浮点机中一旦基数确定后就不再变了，而且基数是隐含的，故不同基数的浮点表示形式完全相同。但基数不同，对数的表示范围和精度等都有影响。一般来说，基数r越大，可表示的浮点数范围越大，而且所表示的数的个数越多。但r越大，浮点数的精度反而下降。

### IEEE 754 标准

浮点数一般采用IEEE指定的国际标准，形式如下：

![image-20220527163433982](/Users/bytedance/Library/Application Support/typora-user-images/image-20220527163433982.png)

按IEEE标准，常用的浮点数由三种：

|          | 符号位 S | 阶码 | 尾数 | 总位数 |
| -------- | -------- | ---- | ---- | ------ |
| 短实数   | 1        | 8    | 23   | 32     |
| 长实数   | 1        | 11   | 52   | 64     |
| 临时岁数 | 1        | 15   | 64   | 80     |

其中，S为数符，表示浮点数的正负，但与其有效位（尾数）是分开的，阶码用移码表示，阶码的真值都被加上一个常数（偏移量），如短实数、长实数和临时实数的偏移量用十六位进制数表示分别为 **7FH**、**3FFH**、**3FFFH**。尾数部分通常都是规格化表示，即非“0”的有效位最高位总是“1”，但在IEEE标准中，有效位形式：1▲ffff...fff。其中▲表示假想的二进制小数点。在实际表示中，对短实数和长实数，这个整数位的1省略，称为隐藏位；对于临时实数不采用隐藏位方案。

### 十进制数178.125的实数表示

![image-20220527164616168](/Users/bytedance/Library/Application Support/typora-user-images/image-20220527164616168.png)

### 单精度图示

1位符号，8位指数，23位小数。

![img](https://pica.zhimg.com/80/v2-749cc641eb4d5dafd085e8c23f8826aa_1440w.jpg?source=1940ef5c)

### 双精度图示

1位符号，11位指数，52位小数。

![img](https://pica.zhimg.com/80/v2-48240f0e1e0dd33ec89100cbe2d30707_1440w.jpg?source=1940ef5c)